#!/bin/bash
cd "$(dirname "$0")/../Resources"

# Find Python 3 - try common locations
PYTHON_CMD=""
for python_path in python3 /usr/bin/python3 /opt/homebrew/bin/python3 /usr/local/bin/python3 /Library/Frameworks/Python.framework/Versions/*/bin/python3; do
    if command -v "$python_path" >/dev/null 2>&1; then
        if "$python_path" --version 2>&1 | grep -q "Python 3"; then
            PYTHON_CMD="$python_path"
            echo "Using Python: $PYTHON_CMD"
            break
        fi
    fi
done

if [ -z "$PYTHON_CMD" ]; then
    osascript -e 'display dialog "Python 3 is required but not found.\n\nPlease install Python from python.org first, then run this installer again." buttons {"Install Python", "Cancel"} default button "Install Python"'
    if [ $? -eq 0 ]; then
        open "https://python.org/downloads/"
    fi
    exit 1
fi

# Run the installer
exec "$PYTHON_CMD" "USB_Camera_Tester_Simple_Installer.py" "$@"
