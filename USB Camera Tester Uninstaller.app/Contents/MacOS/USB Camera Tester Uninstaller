#!/bin/bash
cd "$(dirname "$0")/../Resources"

# Find Python 3 - try common locations
PYTHON_CMD=""
for python_path in python3 /usr/bin/python3 /opt/homebrew/bin/python3 /usr/local/bin/python3 /Library/Frameworks/Python.framework/Versions/*/bin/python3; do
    if command -v "$python_path" >/dev/null 2>&1; then
        if "$python_path" --version 2>&1 | grep -q "Python 3"; then
            PYTHON_CMD="$python_path"
            echo "Using Python: $PYTHON_CMD"
            break
        fi
    fi
done

if [ -z "$PYTHON_CMD" ]; then
    osascript -e 'display dialog "Python 3 is required to run the uninstaller.\n\nThe uninstaller needs Python 3 to properly remove all files." buttons {"OK"} default button "OK" with icon stop'
    exit 1
fi

# Run the uninstaller
exec "$PYTHON_CMD" "USB_Camera_Tester_Uninstaller.py" "$@"
